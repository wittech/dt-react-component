"use strict";

var _require = require('./string'),
    stringType = _require.stringType,
    subErrorStr = _require.subErrorStr;

module.exports = function (ast, matches, cb) {
  var text = ast.node.value;
  var line = ast.node.position.start.line;
  var column = ast.node.position.start.column;
  var typeText = text.split('').map(function (s) {
    return stringType(s);
  }).join('');

  for (var i = 0; i < typeText.length; i++) {
    var s = typeText.substr(i, 2);

    if (matches.indexOf(s) !== -1) {
      // 存在则抛出去
      cb({
        start: {
          line: line,
          column: column + i + 1
        },
        end: {
          line: line,
          column: column + i + 2
        },
        text: "No space between Chinese and alphabet / number: ".concat(subErrorStr(text, i, 12)) // substring 12 个字符

      });
    }
  }
};