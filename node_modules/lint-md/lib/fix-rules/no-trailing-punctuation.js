"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _lodash = _interopRequireDefault(require("lodash"));

var _Text = _interopRequireDefault(require("../helper/Text"));

var _ast = require("../helper/ast");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Symbols = '.,;:!?。，；：！？…~*`';

var _default = function _default(markdown, error) {
  var ast = error.ast;
  var last = (0, _ast.getLastChildLeaf)(ast.node); // 正常情况，最后一个都是 text 类型的

  var value = last.value,
      position = last.position;
  var start = position.start,
      end = position.end;

  var newString = _lodash.default.trimEnd(value, Symbols);

  return new _Text.default(markdown).removeBlock(start, end).insertBlock(start.line, start.column, newString).result();
};

exports.default = _default;